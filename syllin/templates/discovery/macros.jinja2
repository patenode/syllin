{% set feed_pattern = cycler(1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0) %}
{% set sizing_classes = ['col-4', 'col-8'] %}

{% macro feed(songs) -%}
    <!--{{ feed_pattern.reset() }}-->
    <div class="container-fluid">
        <div id="discovery-feed" class="grid">
            <div class="grid-sizer {{ sizing_classes[0] }}"></div>
            {% for song in songs %}
                {% if feed_pattern.next() == 1 %}
                    {% set classes = "grid-item--width-2 " + sizing_classes[1] %}
                {% else %}
                    {% set classes = sizing_classes[0] %}
                {% endif %}
                <div class="grid-item {{ classes }}">
                    <div class="grid-item-contents">
                        <img class="album-art" src="/static/img/placeholder_img.gif">
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{%- endmacro %}

{% macro badge(text, suffix=None) -%}
    <span class="badge{% if suffix %} badge-{{ suffix }}{% endif %}">{{ text }}</span>
{%- endmacro %}

{% macro tags(tags) -%}
    {% if tags %}
        <div class="d-flex p-2">
            {% for tag in tags %}
                {% if tag[1] %}
                    {% set badge_style = 'active' %}
                {% else %}
                    {% set badge_style = 'inactive' %}
                {% endif %}
                {{ badge(tag[0], badge_style) }}
            {% endfor %}
        </div>
    {% endif %}
{%- endmacro %}