<!-- Masonry (depends on jQuery) -->
<script src="/static/js/masonry.pkgd.min.js"></script>

<!-- imagesLoaded (depends on jQuery) -->
<script src="/static/js/imagesloaded.pkgd.min.js"></script>

<!-- Initialize Masonry with imagesLoaded for Discovery Feed -->
<script>
    var $grid = $('.grid').masonry({
        // set itemSelector so .grid-sizer is not used in layout
        itemSelector: '.grid-item',
        // use element for option
        columnWidth: '.grid-sizer',
        percentPosition: true
    });
    // layout Masonry after each image loads
    $grid.imagesLoaded().progress(function () {
        $grid.masonry('layout');
    });
</script>